<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Play Youtube</title>
    <style>
     
    </style>
</head>
<body>
    <div id="player"></div>
    <button onclick=nextSong()>Choose Next</button>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        const songDB = {
            playList:[
                "Ay4l3KpaEbI",
                "RE0wi2Dn_Lc",
                "psi5C9WM3i0",
                "6LD30ChPsSs",
                "yTRHnroQZuM"
            ],
            playListUrl:[
              "https://www.youtube.com/watch?v=6LD30ChPsSs"
            ],
            nowPlayingIndex:0
        }
         // loadYoutubeApi();
          let global_play;
      function createIframe(num){
     
        console.log("Iframe is now ready");
          const ytb = new YT.Player("player",{
            height:300,
            width:400,
            videoId:"Ay4l3KpaEbI",
            playerVars:{autoplay:1,controls:1,disablekb:1},
            events:{
                onReady:(e)=>{console.log("video should play after 3s"); e.target.playVideo()},
                onStateChange:handleStateChange
            }

        })
        console.log(ytb);
        global_play = ytb;
      
      }

        function loadYoutubeApi(){
            const scrpt = document.createElement("script");
            scrpt.src = "https://www.youtube.com/iframe_api";
            document.body.appendChild(scrpt);
        }
        function handleStateChange(event) {
        if (event.data == YT.PlayerState.PLAYING && !done) {
          setTimeout(stopVideo, 6000);
          
        }
      }
      function stopVideo() {
        player.stopVideo();
      }
setTimeout(createIframe,1000);

function nextSong(){

    songDB.nowPlayingIndex = (songDB.playList.length === songDB.nowPlayingIndex+1)?0:songDB.nowPlayingIndex+1;
    console.log(songDB.playList[songDB.nowPlayingIndex]);
    global_play.loadVideoById(songDB.playList[songDB.nowPlayingIndex],0,'small');
}

function factiorial(a){
  if(a===0) return 1;
  return a*factorial(a-1);
}

// factorial(5);
    </script>
</body>
</html>